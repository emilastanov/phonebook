(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){"use strict";a.r(t);a(71),a(96);var n=a(0),l=a.n(n),s=a(40),c=a.n(s),o=a(24),r=a.n(o),u=a(19),i=a(20),h=a(22),p=a(21),m=a(23),d=a(2),b=a(1),f=(a(118),a(12)),E=a.n(f),v=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={alert:null,searchValue:null,resultOfSearch:null},a.searchNumber=a.searchNumber.bind(Object(d.a)(Object(d.a)(a))),a.updateSearchValue=a.updateSearchValue.bind(Object(d.a)(Object(d.a)(a))),a.closePopout=a.closePopout.bind(Object(d.a)(Object(d.a)(a))),a.addNumber=a.addNumber.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"closePopout",value:function(){this.props.alert(null)}},{key:"searchNumber",value:function(){var e=this;this.state.searchValue?10===this.state.searchValue.length?E.a.get("https://emilastanov.pythonanywhere.com/gp_".concat(this.state.searchValue)).then(function(t){e.setState({resultOfSearch:t.data.names})}).catch(function(t){500===t.response.status&&e.props.alert(l.a.createElement(b.Alert,{actions:[{title:"\u041d\u0435\u0442",autoclose:!0,style:"cancel"},{title:"\u0414\u0430",style:"default"}],onClose:e.closePopout,onClick:e.addNumber},l.a.createElement("h2",null,"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440."),l.a.createElement("p",null,"\u042d\u0442\u043e\u0433\u043e \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0435\u0442 \u0432 \u043d\u0430\u0448\u0435\u043c \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0435. \u0425\u043e\u0442\u0438\u0442\u0435 \u0435\u0433\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c?")))}):this.props.alert(l.a.createElement(b.Alert,{actions:[{title:"\u041e\u043a",autoclose:!0,style:"cancel"}],onClose:this.closePopout},l.a.createElement("h2",null,"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u043e\u043c\u0435\u0440\u0430!"),l.a.createElement("p",null,"9123456789"))):this.props.alert(l.a.createElement(b.Alert,{actions:[{title:"\u041e\u043a",autoclose:!0,style:"cancel"}],onClose:this.closePopout},l.a.createElement("h2",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440!"),l.a.createElement("p",null,"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c!")))}},{key:"addNumber",value:function(){this.props.alert(null),this.props.setActivePanel("addnumber")}},{key:"updateSearchValue",value:function(e){this.setState({searchValue:e.target.value})}},{key:"render",value:function(){return l.a.createElement(b.Panel,{id:this.props.id},l.a.createElement(b.PanelHeader,null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a"),l.a.createElement(b.Group,{title:"\u041f\u043e\u0438\u0441\u043a"},l.a.createElement(b.FormLayout,null,l.a.createElement(b.Input,{type:"text",alignment:"left",value:this.state.searchValue,onChange:this.updateSearchValue}),l.a.createElement(b.Button,{size:"xl",onClick:this.searchNumber},"\u041f\u043e\u0438\u0441\u043a"))),this.state.resultOfSearch?l.a.createElement(b.Group,{title:this.state.searchValue,style:{padding:"8px"}},l.a.createElement(b.List,null,this.state.resultOfSearch.map(function(e,t){return l.a.createElement(b.Cell,{key:t},e)}))):null)}}]),t}(l.a.Component),O=a(69),y=a.n(O),j=a(41),P=a.n(j),g=Object(b.platform)(),V=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={phone:null,name:null,alert:null},a.updateNameValue=a.updateNameValue.bind(Object(d.a)(Object(d.a)(a))),a.updatePhoneValue=a.updatePhoneValue.bind(Object(d.a)(Object(d.a)(a))),a.addNumber=a.addNumber.bind(Object(d.a)(Object(d.a)(a))),a.closePopout=a.closePopout.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"updatePhoneValue",value:function(e){this.setState({phone:e.target.value})}},{key:"updateNameValue",value:function(e){this.setState({name:e.target.value})}},{key:"addNumber",value:function(){var e=this;this.state.phone&&this.state.name?10===this.state.phone.length?E.a.get("https://emilastanov.pythonanywhere.com/ap_".concat(this.state.phone,"/user_").concat(this.state.name)).then(function(t){"SUCCESS"===t.data.status&&(e.props.alert(l.a.createElement(b.Alert,{actions:[{title:"\u041e\u043a",autoclose:!0,style:"cancel"}],onClose:e.closePopout},l.a.createElement("h2",null,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d!"),l.a.createElement("p",null,"\u041d\u043e\u043c\u0435\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0432\u0430\u043b\u0435\u043d."))),e.props.setActivePanel("home"))}):this.props.alert(l.a.createElement(b.Alert,{actions:[{title:"\u041e\u043a",autoclose:!0,style:"cancel"}],onClose:this.closePopout},l.a.createElement("h2",null,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 10 \u0446\u0438\u0444\u0440!"),l.a.createElement("p",null,"9123456789"))):this.props.alert(l.a.createElement(b.Alert,{actions:[{title:"\u041e\u043a",autoclose:!0,style:"cancel"}],onClose:this.closePopout},l.a.createElement("h2",null,"\u041f\u043e\u043b\u044f \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c\u0438!"),l.a.createElement("p",null,"\u041e\u0431\u0430 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b.")))}},{key:"closePopout",value:function(){this.props.alert(null)}},{key:"render",value:function(){return l.a.createElement(b.Panel,{id:this.props.id},l.a.createElement(b.PanelHeader,{left:l.a.createElement(b.HeaderButton,{onClick:this.props.go,"data-to":"home"},g===b.IOS?l.a.createElement(y.a,null):l.a.createElement(P.a,null))},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),l.a.createElement(b.Group,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"},l.a.createElement(b.FormLayout,null,l.a.createElement(b.Input,{top:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",placeholder:"9123456789",value:this.state.phone,onChange:this.updatePhoneValue}),l.a.createElement(b.Input,{top:"\u0418\u043c\u044f",value:this.state.name,onChange:this.updateNameValue}),l.a.createElement(b.Button,{size:"xl",onClick:this.addNumber},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))}}]),t}(l.a.Component),S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.setActivePanel=function(e){a.setState({activePanel:e})},a.showAlert=function(e){a.setState({alert:e})},a.state={activePanel:"home",fetchedUser:null,alert:null,userphone:null},a.addNewUser=a.addNewUser.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;r.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;case"VKWebAppGetPhoneNumberResult":e.addNewUser(t.detail.data.phone_number.slice(-10));break;default:console.log(t)}}),r.a.send("VKWebAppGetUserInfo",{}),r.a.send("VKWebAppGetPhoneNumber",{})}},{key:"addNewUser",value:function(e){var t=this;E.a.get("https://emilastanov.pythonanywhere.com/gp_".concat(this.state.searchValue)).catch(function(a){500===a.response.status&&E.a.get("https://emilastanov.pythonanywhere.com/ap_".concat(e,"/user_").concat(t.state.fetchedUser.first_name," ").concat(t.state.fetchedUser.last_name)).then(function(e){console.log("SUCCESS")})})}},{key:"render",value:function(){return l.a.createElement(b.View,{activePanel:this.state.activePanel,popout:this.state.alert},l.a.createElement(v,{id:"home",alert:this.showAlert,fetchedUser:this.state.fetchedUser,go:this.go,setActivePanel:this.setActivePanel}),l.a.createElement(V,{id:"addnumber",alert:this.showAlert,go:this.go,setActivePanel:this.setActivePanel}))}}]),t}(l.a.Component);r.a.send("VKWebAppInit",{}),c.a.render(l.a.createElement(S,null),document.getElementById("root"))},70:function(e,t,a){e.exports=a(138)}},[[70,1,2]]]);
//# sourceMappingURL=main.3a322f49.chunk.js.map