{"version":3,"sources":["api.js","panels/Home.js","panels/SelectCode.js","App.js","index.js"],"names":["main_url","getCode","from","to","axios","get","params","getPhone","code","phone","url","concat","addPhone","user","vk_id","Home","state","data","inputValue","isLoading","inputValueName","selectCode","_this","props","setActivePanel","addPhoneNumber","setAlert","react_default","a","createElement","vkui","actionsLayout","actions","title","autoclose","action","country","then","res","console","log","setState","getPhoneData","style","onClose","closeAlert","placeholder","value","onChange","updateValueName","evt","target","length","status","catch","err","updateValue","id","this","top","onClick","name","type","size","level","marginTop","map","item","key","React","Component","osname","platform","SelectCode","list","updateList","window","addEventListener","onScroll","removeEventListener","scrollY","innerHeight","_this2","_this3","left","IOS","chevron_back_default","back_default","setCountry","App","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","activePanel","home","alert","connect","subscribe","e","detail","checkUser","send","phone_number","slice","first_name","last_name","popout","panels_Home","panels_SelectCode","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4309d0ad.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst main_url = 'https://phonebook.pythonanywhere.com/';\n\nexport const getCode = (from, to) => {\n    const url = main_url + `gc`;\n    return axios.get(\n        url,\n        {\n            params: {\n                from: from,\n                to: to\n            }\n        }\n    )\n};\n\nexport const getPhone = (code, phone) => {\n    const url = main_url + `gp/${code}/${phone}`;\n    return axios.get(\n        url\n    )\n};\n\nexport const addPhone = (code, phone, user, vk_id) => {\n    const url = main_url + `ap/${code}/${phone}/${user}`;\n    return axios.get(\n        url,\n        {\n            params: {\n                vk_id: vk_id\n            }\n        }\n    )\n};\n\nexport const checkUser = (vk_id) => {\n    const url = main_url + `cu/${vk_id}`;\n    return axios.get(\n        url\n    )\n};","import React from 'react';\nimport {\n\tPanel,\n\tButton,\n\tGroup,\n\tPanelHeader,\n\tSelectMimicry,\n\tFormLayout,\n\tInput,\n\tFooter,\n\tList,\n\tCell,\n\tSpinner,\n\tDiv,\n\tAlert\n\n} from '@vkontakte/vkui';\nimport { getPhone, addPhone } from '../api'\n\n\nclass Home extends React.Component{\n\n\tstate = {\n\t\tdata: null,\n\t\tinputValue: null,\n\t\tisLoading: false,\n\t\tinputValueName: null\n\t};\n\n\n\tselectCode = () => {\n\t\tthis.props.setActivePanel('select_code')\n\t};\n\n\taddPhoneNumber = () =>{\n\t\tthis.props.setAlert(\n\t\t\t<Alert\n\t\t\t\tactionsLayout=\"horizontal\"\n\t\t\t\tactions={[{\n\t\t\t\t\ttitle: 'Ок',\n\t\t\t\t\tautoclose: true,\n\t\t\t\t\taction: () =>{\n\t\t\t\t\t\tif (this.state.inputValueName) {\n\t\t\t\t\t\t\taddPhone(this.props.data.country.code,this.state.inputValue,this.state.inputValueName).then((res)=>{\n\t\t\t\t\t\t\t\tconsole.log(res.data)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(\"Number not added!\")\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tinputValueName: null\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.getPhoneData();\n\t\t\t\t\t},\n\t\t\t\t\tstyle: 'default'\n\t\t\t\t}]}\n\t\t\t\tonClose={this.props.closeAlert}\n\t\t\t>\n\t\t\t\t<h2>Номер.</h2>\n\t\t\t\t<p>Введите владельца:</p>\n\t\t\t\t<Div>\n\t\t\t\t\t<Input placeholder=\"Имя\" value={this.state.inputValueName} onChange={this.updateValueName}/>\n\t\t\t\t</Div>\n\t\t\t</Alert>\n\t\t)\n\t};\n\tupdateValueName = (evt) => {\n\t\tthis.setState({inputValueName: evt.target.value})\n\t};\n\n\tgetPhoneData = () => {\n\t\tthis.setState({isLoading:true, data: null});\n\t\tif (this.state.inputValue) {\n\t\t\tswitch (this.props.data.country.code) {\n\t\t\t\tcase 7:\n\t\t\t\t\tif (this.state.inputValue.length === 10) {\n\t\t\t\t\t\tgetPhone(this.props.data.country.code,this.state.inputValue).then((res)=>{\n\t\t\t\t\t\t\tif (res.data.status === \"SUCCESS\"){\n\t\t\t\t\t\t\t\tthis.setState({data: res.data, isLoading:false})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setState({isLoading:false})\n\t\t\t\t\t\t\t\tthis.props.setAlert(\n\t\t\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\t\t\tactionsLayout=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Да',\n\t\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\t\taction: this.addPhoneNumber,\n\t\t\t\t\t\t\t\t\t\t\tstyle: 'default'\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Нет',\n\t\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\t\tstyle: 'destructive'\n\t\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t\t\tonClose={this.props.closeAlert}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<h2>Ошибка.</h2>\n\t\t\t\t\t\t\t\t\t\t<p>Введенный номер не найден!<br/>Вы знаете этот номер?</p>\n\t\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch((err)=>{\n\t\t\t\t\t\t\tthis.setState({isLoading:false});\n\t\t\t\t\t\t\tthis.props.setAlert(\n\t\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\t\tactionsLayout=\"horizontal\"\n\t\t\t\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Да',\n\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\tstyle: 'default'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Нет',\n\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\tstyle: 'destructive'\n\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t\tonClose={this.props.closeAlert}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<h2>Ошибка.</h2>\n\t\t\t\t\t\t\t\t\t<p>Произошла неизвестная ошибка!</p>\n\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t} else{\n\t\t\t\t\t\tthis.setState({isLoading:false});\n\t\t\t\t\t\tthis.props.setAlert(\n\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\tactionsLayout=\"horizontal\"\n\t\t\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t\t\t\ttitle: 'Ок',\n\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\tstyle: 'default'\n\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\tonClose={this.props.closeAlert}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h2>Ошибка.</h2>\n\t\t\t\t\t\t\t\t<p>Номер для выбранного региона введен некорректно!<br/>Пример:<br/>9150000000<br/>4950000000</p>\n\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tgetPhone(this.props.data.country.code,this.state.inputValue).then((res)=>{\n\t\t\t\t\t\tif (res.data.status === \"SUCCESS\"){\n\t\t\t\t\t\t\tthis.setState({data: res.data, isLoading: false})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setState({isLoading:false});\n\t\t\t\t\t\t\tthis.props.setAlert(\n\t\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\t\tactionsLayout=\"horizontal\"\n\t\t\t\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Да',\n\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\taction: this.addPhoneNumber,\n\t\t\t\t\t\t\t\t\t\tstyle: 'default'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Нет',\n\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\tstyle: 'destructive'\n\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t\tonClose={this.props.closeAlert}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<h2>Ошибка.</h2>\n\t\t\t\t\t\t\t\t\t<p>Введенный номер не найден!<br/>Вы знаете этот номер?</p>\n\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((err)=>{\n\t\t\t\t\t\tthis.setState({isLoading:false})\n\t\t\t\t\t\tthis.props.setAlert(\n\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\tactionsLayout=\"horizontal\"\n\t\t\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t\t\t\ttitle: 'Да',\n\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\tstyle: 'default'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\ttitle: 'Нет',\n\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\tstyle: 'destructive'\n\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\tonClose={this.props.closeAlert}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h2>Ошибка.</h2>\n\t\t\t\t\t\t\t\t<p>Произошла неизвестная ошибка!</p>\n\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setState({isLoading:false});\n\t\t\tthis.props.setAlert(\n\t\t\t\t<Alert\n\t\t\t\t\tactionsLayout=\"horizontal\"\n\t\t\t\t\tactions={[{\n\t\t\t\t\t\ttitle: 'Ок',\n\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\tstyle: 'default'\n\t\t\t\t\t}]}\n\t\t\t\t\tonClose={this.props.closeAlert}\n\t\t\t\t>\n\t\t\t\t\t<h2>Ошибка.</h2>\n\t\t\t\t\t<p>Поле ввода номера - пусто.</p>\n\t\t\t\t</Alert>\n\t\t\t)\n\t\t}\n\t};\n\n\tupdateValue = (evt) => {\n\t\tthis.setState({inputValue: evt.target.value})\n\t};\n\n\trender() {\n\t\treturn <Panel id={this.props.id}>\n\t\t\t<PanelHeader>Телефонный справочник</PanelHeader>\n\n\t\t\t<Group title=\"Поиск\">\n\t\t\t\t<FormLayout>\n\t\t\t\t\t<SelectMimicry\n\t\t\t\t\t\ttop=\"Выберите код страны\"\n\t\t\t\t\t\tplaceholder=\"Не выбрана\"\n\t\t\t\t\t\tonClick={this.selectCode}\n\t\t\t\t\t>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.data.country.name ?\n\t\t\t\t\t\t\t\t<span> +{this.props.data.country.code} {this.props.data.country.name} </span>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t</SelectMimicry>\n\t\t\t\t\t<Input placeholder=\"Введите номер\" type=\"tel\" value={this.state.inputValue ? this.state.inputValue : null} onChange={this.updateValue}/>\n\t\t\t\t\t<Button size=\"xl\" level=\"1\" onClick={this.getPhoneData}>Поиск</Button>\n\t\t\t\t</FormLayout>\n\t\t\t</Group>\n\t\t\t{this.state.isLoading ? <Div><Spinner size=\"medium\" style={{ marginTop: 20 }} /></Div>:\n\t\t\t\tthis.state.data ?\n\t\t\t\t\t<Group title=\"Результат\">\n\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t{this.state.data.name.map((item,id)=>{\n\t\t\t\t\t\t\t\treturn <Cell key={id}>{item}</Cell>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Group> : null\n\t\t\t}\n\t\t\t<Footer>Введи номер и нажми поиск, чтобы узнать имя абонента.</Footer>\n\t\t</Panel>\n\t}\n\n}\nexport default Home;","import React from 'react';\nimport {\n    Panel,\n    Group,\n    PanelHeader,\n    List,\n    Cell,\n    HeaderButton,\n    IOS,\n    platform,\n    Spinner,\n    Div\n} from '@vkontakte/vkui';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\n\nimport { getCode } from '../api';\n\nconst osname = platform();\n\nclass SelectCode extends React.Component {\n    state = {\n        list: null,\n        from: 0,\n        to: 20\n    };\n\n    componentDidMount() {\n       getCode(this.state.from, this.state.to).then((res) => {\n            this.setState({\n                list: res.data\n            });\n            console.log(res.data)\n        });\n        window.addEventListener('scroll', this.onScroll, false);\n    }\n\n    updateList = () => {\n        this.setState({from: this.state.to, to: this.state.to + 20});\n        getCode(this.state.from, this.state.to).then((res)=>{\n            this.setState({list: this.state.list.concat(res.data)});\n            if (this.state.to < 200){\n                window.addEventListener('scroll', this.onScroll, false);\n            }\n        });\n        window.removeEventListener('scroll', this.onScroll, false);\n    };\n\n    onScroll = () => {\n        if (\n            this.state.list.length && window.scrollY + window.innerHeight >= this.state.list.length*44 - 132\n        ) {\n            this.updateList();\n        }\n    };\n\n    render() {\n        return <Panel id={this.props.id}>\n            <PanelHeader left={\n                <HeaderButton onClick={() => this.props.setActivePanel('home')}>{osname === IOS ? <Icon28ChevronBack /> : <Icon24Back />}</HeaderButton>\n            }>\n                Выбор страны\n            </PanelHeader>\n            <Group>\n                    {this.state.list ? <List>\n                        {this.state.list.map((item,id)=>{\n                            return <Cell key={id}\n                                         onClick={() => {\n                                             this.props.setCountry( item[0],item[1]);\n                                             this.props.setActivePanel('home');\n                                         }}\n                            >\n                                +{item[0]} {item[1]}\n                                </Cell>\n                        })}\n                    </List>:<Div><Spinner size=\"medium\" style={{ marginTop: 20 }} /></Div>}\n            </Group>\n        </Panel>\n    }\n}\n\nexport default SelectCode","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport SelectCode from './panels/SelectCode'\nimport {checkUser, addPhone} from \"./api\";\n\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactivePanel: 'home',\n\t\t\tuser: null,\n\t\t\thome: {\n\t\t\t\tcountry: {\n\t\t\t\t\tname: \"Россия\",\n\t\t\t\t\tcode: 7\n\t\t\t\t}\n\t\t\t},\n\t\t\talert: null\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({ user: e.detail.data });\n\n\t\t\t\t\tcheckUser(e.detail.data.id).then((res)=>{\n\t\t\t\t\t\tif (res.data.status === \"NOT_EXIST\"){\n\t\t\t\t\t\t\tconsole.log(\"NEW USER\");\n\t\t\t\t\t\t\tconnect.send('VKWebAppGetPhoneNumber')\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(\"OLD USER\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppGetPhoneNumberResult':\n\t\t\t\t\taddPhone(\n\t\t\t\t\t\te.detail.data.phone_number.slice(0,1),\n\t\t\t\t\t\te.detail.data.phone_number.slice(1),\n\t\t\t\t\t\t`${this.state.user.first_name} ${this.state.user.last_name}`,\n\t\t\t\t\t\tthis.state.user.id\n\t\t\t\t\t).then((res)=>{\n\t\t\t\t\t\tconsole.log(`NEW USER >> `);\n\t\t\t\t\t\tconsole.log(res.data);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(e.detail);\n\t\t\t}\n\t\t});\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t\tconnect.send(\"VKWebAppOpenContacts\", {});\n\t}\n\n\n\tsetActivePanel = (id) => {\n\t\tthis.setState({\n\t\t\tactivePanel: id\n\t\t})\n\t};\n\n\tsetCountry = (code, name) => {\n\t\tthis.setState({\n\t\t\thome: {\n\t\t\t\tcountry: {\n\t\t\t\t\tname: name,\n\t\t\t\t\tcode: code\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t};\n\n\tsetAlert = (alert) => {\n\t\tthis.setState({alert: alert})\n\t};\n\n\tcloseAlert = () => {\n\t\tthis.setState({alert: null})\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.alert}>\n\t\t\t\t<Home\n\t\t\t\t\tid=\"home\"\n\t\t\t\t\tdata={this.state.home}\n\t\t\t\t\tsetActivePanel={this.setActivePanel}\n\t\t\t\t\tsetAlert={this.setAlert}\n\t\t\t\t\tcloseAlert={this.closeAlert}\n\t\t\t\t/>\n\t\t\t\t<SelectCode\n\t\t\t\t\tid=\"select_code\"\n\t\t\t\t\tsetCountry={this.setCountry}\n\t\t\t\t\tsetActivePanel={this.setActivePanel}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT \n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}